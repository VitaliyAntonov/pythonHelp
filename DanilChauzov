# ĞšÑ€ĞµÑÑ‚Ğ¸ĞºĞ¸ Ğ½Ğ¾Ğ»Ğ¸ĞºĞ¸
board = list(range(10)) # ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ 1.0 (9 ĞºĞ»ĞµÑ‚Ğ¾Ñ‡ĞµĞº)

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ 2.0 (Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° 3Ñ…3 ĞºĞ»ĞµÑ‚Ğ¾Ñ‡ĞµĞº)
def create_board(board):
   print(13 * 'â€”')
   for i in range(3):
      print('|', board[1+i*3], '|', board[2+i*3], '|', board[3+i*3], '|')
      print(13 * 'â€”')
# create_board(board)

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹
win_position = ((1,2,3), (4,5,6), (7,8,9), (1,4,7), (2,5,8), (3,6,9), (1,5,9), (3,5,7)) # Ğ²ÑĞµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ñ‹

# Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ…Ğ¾Ğ´Ğ¾Ğ² Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ² 
def take_turn(player_turn):
  A = False
  while not A:
    print('Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¾Ñ‚ 1 Ğ´Ğ¾ 9.')
    print('Ğ¥Ğ¾Ğ´ -', player_turn)
    Turn = int(input('ĞšÑƒĞ´Ğ° Ğ¿Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ? - '))
    # Ğ¦Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ğ²Ğ¾Ğ´Ğ° 
    try:
      check = Turn
      check >= 1
      check <= 9
    except:
      print('ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ²Ğ¾Ğ´.')
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ»ĞµÑ‚ĞºĞ¸ / Ñ…Ğ¾Ğ´ 
    if str(board[Turn]) not in 'XO':
      board[Turn] = player_turn
      A = True
    else:
      print('Ğ”Ğ°Ğ½Ğ½Ğ°Ñ ĞºĞ»ĞµÑ‚ĞºĞ° ÑƒĞ¶Ğµ Ğ·Ğ°Ğ½ÑÑ‚Ğ° ğŸ™')

# Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ…Ğ¾Ğ´Ğ¾Ğ² Ğ±Ğ¾Ñ‚Ğ°
def bot_turn(Bot_Turn):
  B = False
  bot = 0
  corners = [1, 3, 7, 9]
  maybe_draw = [2, 4, 6, 8]
  random.shuffle(corners)
  random.shuffle(maybe_draw)
  while not B:
    # Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ 1 (ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ·Ğ° 1 Ñ…Ğ¾Ğ´ Ğ´Ğ¾ Ğ¿Ğ¾Ğ±ĞµĞ´Ñ‹)
    for k in win_position:
      if board[k[0]] == board[k[1]] and str(board[k[2]]) not in 'XO':
        bot = k[2]
      elif board[k[1]] == board[k[2]] and str(board[k[0]]) not in 'XO':
        bot = k[0]
      elif board[k[0]] == board[k[2]] and str(board[k[1]]) not in 'XO':
        bot = k[1]
    if bot != 0:
      board[bot] = Bot_Turn
      B = True
      bot = 0
    else:
      if str(board[5]) not in 'XO':
        board[5] = Bot_Turn
      elif str(board[corners[0]]) not in 'XO':
        board[corners[0]] = Bot_Turn
      elif str(board[corners[1]]) not in 'XO':
        board[corners[1]] = Bot_Turn
      elif str(board[corners[2]]) not in 'XO':
        board[corners[2]] = Bot_Turn
      elif str(board[corners[3]]) not in 'XO':
        board[corners[3]] = Bot_Turn
      elif str(board[maybe_draw[0]]) not in 'XO':
        board[maybe_draw[0]] = Bot_Turn
      elif str(board[maybe_draw[1]]) not in 'XO':
        board[maybe_draw[1]] = Bot_Turn
      elif str(board[maybe_draw[2]]) not in 'XO':
        board[maybe_draw[2]] = Bot_Turn
      elif str(board[maybe_draw[2]]) not in 'XO':
        board[maybe_draw[2]] = Bot_Turn
      B = True

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹
def check_win_position(board):
  for j in win_position:
    # print(board[j[0]], board[j[1]], board[j[2]])
    if board[j[0]] == board[j[1]] == board[j[2]]: #Ğ•ÑĞ»Ğ¸ Ğ²ÑĞµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ (Ğ¥ Ğ¸Ğ»Ğ¸ Ğ) Ñ€Ğ°Ğ²Ğ½Ñ‹
      return board[j[0]]
  return False

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¸Ğ³Ñ€Ñ‹ 1 Ğ½Ğ° 1 (ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ¿Ğ»ĞµĞµÑ€)
# ĞŸĞµÑ€Ğ²Ñ‹Ğµ Ñ…Ğ¾Ğ´ÑÑ‚ "ĞšÑ€ĞµÑÑ‚Ğ¸ĞºĞ¸"
def play_game_multiplayer(board):
  Turns = 0
  Win = False
  while not Win: 
    create_board(board)
    # Ğ¥Ğ¾Ğ´ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° 
    if Turns % 2 == 0:
      take_turn('X')
    else:
      take_turn('O')
    Turns += 1
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ Ğ² Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ Ğ¸Ğ³Ñ€Ñ‹
    if Turns >= 4:
      check_win = check_win_position(board)
      if check_win:
        print('ğŸ‰ ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ ',check_win,', Ñ‚Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ğ»! ğŸ‰', sep = '')
        Win = True
        break
      if Turns == 9:
        print('ğŸ¤ğŸ» ĞĞ¸Ñ‡ÑŒÑ! ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ğ»Ğ° Ğ´Ñ€ÑƒĞ¶Ğ±Ğ°! ğŸ¤ğŸ»')
        break

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¸Ğ³Ñ€Ñ‹ Ñ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼ (ÑĞ¸Ğ½Ğ³Ğ»Ğ¿Ğ»ĞµĞµÑ€)
def play_game_singleplayer(board):
  Turns = 0
  Win = False
  First_turn = random.randint(1,2)
  if First_turn == 1:
    print('Ğ’Ğ°Ñˆ Ñ…Ğ¾Ğ´ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹')
    while not Win: 
      create_board(board)
      # Ğ¥Ğ¾Ğ´ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° 
      if Turns % 2 == 0:
        take_turn('X')
      else:
        bot_turn('O')
      Turns += 1
      # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ Ğ² Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ Ğ¸Ğ³Ñ€Ñ‹
      if Turns >= 4:
        check_win = check_win_position(board)
        if check_win:
          if check_win == 'X':
            print('ğŸ‰ ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼, Ñ‚Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ğ»! ğŸ‰', sep = '')
            Win = True
            break
          elif check_win == 'O':
            print('ğŸ¤– ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ğ» Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ ğŸ¤–')
            Win = True
            break
        if Turns == 9:
          print('ğŸ¤ğŸ» ĞĞ¸Ñ‡ÑŒÑ! ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ğ»Ğ° Ğ´Ñ€ÑƒĞ¶Ğ±Ğ°! ğŸ¤ğŸ»')
          break
    
  else:
    print('Ğ‘Ğ¾Ñ‚ Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼')
    while not Win: 
      create_board(board)
      # Ğ¥Ğ¾Ğ´ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ° 
      if Turns % 2 == 0:
        bot_turn('X')
      else:
        take_turn('O')
      Turns += 1
      # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ Ğ² Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ Ğ¸Ğ³Ñ€Ñ‹
      if Turns >= 4:
        check_win = check_win_position(board)
        if check_win:
          if check_win == 'O':
            print('ğŸ‰ ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼, Ñ‚Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ğ»! ğŸ‰', sep = '')
            Win = True
            break
          elif check_win == 'X':
            print('ğŸ¤– ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ğ» Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ ğŸ¤–')
            Win = True
            break
        if Turns == 9:
          print('ğŸ¤ğŸ» ĞĞ¸Ñ‡ÑŒÑ! ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ğ»Ğ° Ğ´Ñ€ÑƒĞ¶Ğ±Ğ°! ğŸ¤ğŸ»')
          break


play_game_multiplayer(board)
play_game_singleplayer(board)
create_board(board)

print('ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "Enter" Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ½Ğ¾Ğ²Ğ°.')
